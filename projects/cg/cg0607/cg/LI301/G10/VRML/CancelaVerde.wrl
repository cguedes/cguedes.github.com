#VRML V2.0 utf8

# Cancela verde, frente 'a entrada
# Medidas em METROS

EXTERNPROTO	BarraVerde [ ] "barraVerde.wrl"

PROTO Reflector[]{
	Shape {
		appearance Appearance {
			material Material {
				diffuseColor .61 .61 .61
				specularColor .39 .39 .39
				ambientIntensity .25
				shininess .016
			}
		}
		geometry Box {
			size 0.04 0.02 0.015
		}
	}	
}

PROTO Barra[]{
	Transform {
		children [
			Transform {
				rotation 0 0 1 -1.57
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Cylinder {
							height 4.48
							radius 0.04
							bottom FALSE
						}

					}					
				]
			}

			Transform {
				translation	0 0 0.04
				scale 1.5 1.5 1
				children Reflector { }
			}

			Transform {
				translation	0.896 0 0.04
				scale 1.5 1.5 1
				children Reflector { }
			}
			
			Transform {
				translation	1.792 0 0.04
				scale 1.5 1.5 1
				children Reflector { }
			}			

			Transform {
				translation	-0.896 0 0.04
				scale 1.5 1.5 1
				children Reflector { }
			}
			
			Transform {
				translation	-1.792 0 0.04
				scale 1.5 1.5 1
				children Reflector { }
			}			

			Transform {
				translation	0 0 -0.04
				scale 1.5 1.5 1
				children Reflector { }
			}

			Transform {
				translation	0.896 0 -0.04
				scale 1.5 1.5 1
				children Reflector { }
			}
			
			Transform {
				translation	1.792 0 -0.04
				scale 1.5 1.5 1
				children Reflector { }
			}			

			Transform {
				translation	-0.896 0 -0.04
				scale 1.5 1.5 1
				children Reflector { }
			}
			
			Transform {
				translation	-1.792 0 -0.04
				scale 1.5 1.5 1
				children Reflector { }
			}			
		]
	}
}

PROTO Peso[]{
	Transform {
		children [
			Transform {
				translation	0 -0.225 0
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Box {
							size 0.46 0.45 0.12
						}
					}
				]
			}
			
			Transform {
				translation	0 0 0
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Box {
							size 0.47 0.01 0.13
						}
					}
				]
			}

			Transform {
				translation	-0.25 -0.1 0
				rotation 0 0 1 1.57
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Cylinder {
							height 0.05
							radius 0.045
							bottom FALSE
							top	TRUE
						}
					}
				]
			}

			Transform {
				translation	0.25 -0.1 0
				rotation 0 0 1 -1.57
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Cylinder {
							height 0.05
							radius 0.045
							bottom FALSE
							top	TRUE
						}
					}
				]
			}

			Transform {
			    translation	-0.25 -0.1 0.04
				rotation 0 0 1 1.57
				children Reflector { }
			}

			Transform {
			    translation	-0.25 -0.1 -0.04
				rotation 0 0 1 1.57
				children Reflector { }
			}

			Transform {
				translation	-0.275 -0.1 0
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Sphere {
							radius 0.01
						}
					}
				]
			}

			Transform {
				translation	-0.17 0.025 0
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Cylinder {
							height 0.05
							radius 0.01
							bottom FALSE
							top	FALSE
						}
					}
				]
			}

			Transform {
				translation	0.17 0.025 0
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Cylinder {
							height 0.05
							radius 0.01
							bottom FALSE
							top	FALSE
						}
					}
				]
			}

			Transform {
				translation	0 0.05 0
				rotation 0 0 1 1.57
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Cylinder {
							height 0.34
							radius 0.01
							bottom FALSE
							top	FALSE
						}
					}
				]
			}

			Transform {
				translation	-0.17 0.05 0
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Sphere {
							radius 0.01
						}
					}
				]
			}

			Transform {
				translation	0.17 0.05 0
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Sphere {
							radius 0.01
						}
					}
				]
			}
		]
	}
}

PROTO CilindroGrandeArmacao[]{
	Shape {
		appearance Appearance {
			material Material {
				diffuseColor 0 .31 .18
				specularColor .5 .5 .5
				emissiveColor 0 .13 .04
				ambientIntensity 0
			}
		}
		geometry Cylinder {
			height 0.65
			radius 0.03
			bottom FALSE
		}
	}
}

PROTO CilindroMedioArmacao[]{
	Transform {
		children [
			Shape {
				appearance Appearance {
					material Material {
						diffuseColor 0 .31 .18
						specularColor .5 .5 .5
						emissiveColor 0 .13 .04
						ambientIntensity 0
					}
				}
				geometry Cylinder {
					height 0.5
					radius 0.02
					bottom FALSE
				}
			}

			Transform {
				translation	0 0 0.015
				rotation 0 0 1 1.57
				children Reflector { }
			}		
		]
	}
}

PROTO CilindroPequenoArmacao[]{
	Shape {
		appearance Appearance {
			material Material {
				diffuseColor 0 .31 .18
				specularColor .5 .5 .5
				emissiveColor 0 .13 .04
				ambientIntensity 0
			}
		}
		geometry Cylinder {
			height 0.16
			radius 0.02
			bottom FALSE
			top	FALSE
		}
	}
}

PROTO Articulacao[]{
	Transform {
		children [
			Transform {
				translation	0 0.075 0
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Cylinder {
							height 0.15
							radius 0.03
							top FALSE
							bottom FALSE
						}
					}
				]
			}
			Transform {
				translation	0.075 0.235 0
				rotation 0 0 1 -0.785
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Cylinder {
							height 0.2
							radius 0.03
							bottom FALSE
						}
					}
				]
			}
			Transform {
				translation	0 0.16 0
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Sphere {
							radius 0.031
						}
					}
				]
			}

			Transform {
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry IndexedFaceSet	{
							coord Coordinate {
								point [0 0.03 0, 0 0.15 0, 0.15 0.28 0]
							}
							coordIndex [0 1 2 -1]
							solid FALSE
						}
					}
				]
			}

			Transform {
				translation	0.12 0.28 0
				rotation 1 0 0 1.57
				children [
					Shape {
						appearance Appearance {
							material Material {
								diffuseColor 0 .31 .18
								specularColor .5 .5 .5
								emissiveColor 0 .13 .04
								ambientIntensity 0
							}
						}
						geometry Cylinder {
							height 0.12
							radius 0.01
							bottom FALSE
						}
					}
				]
			}
		]
	}
}


# Centro na articulacao
PROTO CancelaVerde
[exposedField SFRotation abertura 0 0 1 0]
{
	Group {
		children [
			Transform {
				translation	-0.1 -0.2 0.1
				children Articulacao { }
			}

			Transform {
				translation	-0.1 -0.2 -0.1
				children Articulacao { }
			}

			Transform {
				translation	-0.1 -0.525 -0.1
				children CilindroGrandeArmacao { }
			}

			Transform {
				translation	-0.1 -0.525 0.1
				children CilindroGrandeArmacao { }
			}

			Transform {
				translation	0.4 -0.525 -0.1
				children CilindroGrandeArmacao { }
			}

			Transform {
				translation	0.4 -0.525 0.1
				children CilindroGrandeArmacao { }
			}

			Transform {
				translation	0.15 -0.2 -0.1
				rotation 0 0 1 1.57
				children [
					Transform {
						rotation 0 1 0 3.14
						children CilindroMedioArmacao  { }
					}
					Transform {
						translation	0 -0.25 0
						children [
							Shape {
								appearance Appearance {
									material Material {
										diffuseColor 0 .31 .18
										specularColor .5 .5 .5
										emissiveColor 0 .13 .04
										ambientIntensity 0
									}
								}
								geometry Sphere	{
									radius 0.03
								}
							}
						]
					}
				]
			}

			Transform {
				translation	0.15 -0.2 0.1
				rotation 0 0 1 1.57
				children [
					Transform {
						children CilindroMedioArmacao { }
					}
					Transform {
						translation	0 -0.25 0
						children [
							Shape {
								appearance Appearance {
									material Material {
										diffuseColor 0 .31 .18
										specularColor .5 .5 .5
										emissiveColor 0 .13 .04
										ambientIntensity 0
									}
								}
								geometry Sphere	{
									radius 0.03
								}
							}
						]
					}
				]
			}

			Transform {
				translation	0.15 -0.525 0.1
				rotation 0 0 1 1.57
				children CilindroMedioArmacao { }
			}

			Transform {
				translation	0.15 -0.525 -0.1
				rotation 0 0 1 1.57
				children [
					Transform {
						rotation 0 1 0 3.14
						children CilindroMedioArmacao  { }
					}
				]
			}

			Transform {
				translation 0.4 -0.2 0
				rotation 1 0 0 1.57
				children CilindroPequenoArmacao	{ }
			}

			Transform {
				translation 0.4 -0.525 0
				rotation 1 0 0 1.57
				children CilindroPequenoArmacao	{ }
			}

			DEF CancelaRot Transform {
				center 0 0.1 0
				rotation IS abertura
				children [
					Transform {
						translation	-0.52 0.19 0
						children Peso { }
					}

					Transform {
						translation	1.98 0.09 0
						children Barra { }
					}
				
				]
			}

			Transform {
				translation	4.2 -0.85 0
				scale 0.5 1.54 0.5
				children BarraVerde	{ }
			}
		]
	}

}



#DEF TS TimeSensor {
#	cycleInterval 10
#	loop TRUE
#}

#DEF OrientRot OrientationInterpolator {
#	key []
#	keyValue []
#}


CancelaVerde { }